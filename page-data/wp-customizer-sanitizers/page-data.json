{"componentChunkName":"component---src-templates-blog-post-js","path":"/wp-customizer-sanitizers/","result":{"data":{"site":{"siteMetadata":{"title":"rafhun"}},"markdownRemark":{"id":"601dff8f-5ad9-5c58-8066-9f65cfc0e142","excerpt":"When adding your own fields to the WordPress customizer it is necessary to define sanitizing functions. The following is a collection of customizers you need…","html":"<p>When adding your own fields to the WordPress customizer it is necessary to define sanitizing functions. The following is a collection of customizers you need for various types of inputs.</p>\n<h2>Radio Box</h2>\n<h3>Sanitizer</h3>\n<p>The value of a radio box must be a slug and be one of the existing options.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sanitizeRadioBox</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$setting</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Must be a slug</span>\n  <span class=\"token variable\">$input</span> <span class=\"token operator\">=</span> <span class=\"token function\">sanitize_key</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Get list of available options</span>\n  <span class=\"token variable\">$options</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">manager</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get_control</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">choices</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Return the input if it is valid, otherwise return a default value</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token function\">array_key_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$options</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$input</span> <span class=\"token punctuation\">:</span> <span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3>Add Control</h3>\n<p>The control has a type of <code class=\"language-text\">radio</code> and provides an array of choices.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Control Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'radio'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'choices'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n      <span class=\"token single-quoted-string string\">'one'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Option One'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token single-quoted-string string\">'two'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Option Two'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<h2>Checkbox</h2>\n<h3>Sanitizer</h3>\n<p>The checkbox simply returns true if checked and false otherwise.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">sanitizeCheckbox</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token boolean constant\">true</span> <span class=\"token punctuation\">:</span> <span class=\"token boolean constant\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3>Add Control</h3>\n<p>The control just defines a label and the type <code class=\"language-text\">checkbox</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'checkbox'</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Select Options</h2>\n<h3>Sanitizer</h3>\n<p>This is pretty much the same as for radio options. It must be a slug and exist in the options.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">sanitizeSelect</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$setting</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Must be a slug</span>\n  <span class=\"token variable\">$input</span> <span class=\"token operator\">=</span> <span class=\"token function\">sanitize_key</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Get list of available options</span>\n  <span class=\"token variable\">$options</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">manager</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get_control</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">id</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">choices</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Return the input if it is valid, otherwise return a default value</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token function\">array_key_exists</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$options</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$input</span> <span class=\"token punctuation\">:</span> <span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Define a type of <code class=\"language-text\">select</code> and provide an array with options. You can add an empty key to set up a “Select an Option” prompt.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'select'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'choices'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n      <span class=\"token single-quoted-string string\">''</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Please select'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token single-quoted-string string\">'one'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Option one'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token single-quoted-string string\">'two'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Option two'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Text Input and Textarea</h2>\n<h3>Sanitizer</h3>\n<p>For basic inputs where you want to allow simple text only you can simply pass the native <code class=\"language-text\">wp_filter_nohtml_kses()</code> function when defining the setting.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'wp_filter_nohtml_kses'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">text</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'text'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Email</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">sanitize_email()</code> function when defining the setting.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'sanitize_email'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">email</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'email'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>URL</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">esc_url_raw()</code> function when defining the setting.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'esc_url_raw'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">url</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'url'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Number</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">absint()</code> or <code class=\"language-text\">intval()</code> function when defining the setting.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'absint'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Converts value to a non-negative integer</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'intval'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Converts value to an integer</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">number</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'number'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Drop-down Pages</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">absint()</code> function when defining the setting, since the input value is a page ID.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'absint'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Converts value to a non-negative integer</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">dropdown-pages</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'dropdown-pages'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>File Input</h2>\n<h3>Sanitizer</h3>\n<p>Define allowed file types, then get the file’s type from its file name.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">sanitizeFile</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$setting</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Allowed types</span>\n  <span class=\"token variable\">$allowed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'jpg|jpeg|jpe'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'image/jpeg'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'gif'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'image/gif'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'png'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'image/png'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Check type from file name</span>\n  <span class=\"token variable\">$extension</span> <span class=\"token operator\">=</span> <span class=\"token function\">wp_check_filetype</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$allowed</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// If file has valid mime return else return default</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$extension</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'ext'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">?</span> <span class=\"token variable\">$file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$setting</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token keyword\">default</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Add Control</h3>\n<p>You need to make use of the <code class=\"language-text\">WP_Customize_Upload_Control</code> class to setup a file input.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">WP_Customize_Upload_Control</span><span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$wp_customize</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>CSS</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">wp_strip_all_tags</code> function when defining the setting.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'wp_strip_all_tags'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">textarea</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'textarea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Color HEX Codes</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">sanitize_hex_color</code> function when defining the setting. Also add a default color here.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'default'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'#000000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'sanitize_hex_color'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Use the <code class=\"language-text\">WP_Customize_Color_Control</code> class to set up a color picker.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">WP_Customize_Color_Control</span><span class=\"token punctuation\">(</span>\n    <span class=\"token variable\">$wp_customize</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>HTML</h2>\n<h3>Sanitizer</h3>\n<p>Use the native <code class=\"language-text\">wp_kses_post</code> function when defining the setting.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_setting</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'sanitize_callback'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'wp_kses_post'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// Keeps only HTML tags that are allowed in post content</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Alternatively you can use the <code class=\"language-text\">wp_kses()</code> function and define the tags you want to allow yourself.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">sanitizeHTML</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$allowed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'a'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>\n        <span class=\"token single-quoted-string string\">'href'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token single-quoted-string string\">'title'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'br'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'em'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'strong'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">wp_kses</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$allowed</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>Add Control</h3>\n<p>Set a type of <code class=\"language-text\">textarea</code> and a label.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$wp_customize</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">add_control</span><span class=\"token punctuation\">(</span>\n  <span class=\"token variable\">$settingId</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token single-quoted-string string\">'label'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">esc_html__</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'Label'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'textdomain'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'section'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token variable\">$sectionId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token single-quoted-string string\">'type'</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token single-quoted-string string\">'textarea'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>More information and documentation</h2>\n<p>Find more on native sanitizing functions in the <a href=\"https://codex.wordpress.org/Validating_Sanitizing_and_Escaping_User_Data\">WordPress Codex</a>. Also take a look through <code class=\"language-text\">/wp-includes/formatting.php</code> to see all of the sanitization and escaping functions WordPress has to offer.</p>","frontmatter":{"title":"Sanitizer Functions For the WordPress Customizer","date":"November 08, 2020","description":null}},"previous":{"fields":{"slug":"/gutenberg-dynamic-blocks-color/"},"frontmatter":{"title":"Using colors in dynamic blocks"}},"next":null},"pageContext":{"id":"601dff8f-5ad9-5c58-8066-9f65cfc0e142","previousPostId":"8749e48c-78d4-589e-bf3e-13538e921663","nextPostId":null}},"staticQueryHashes":["1633425274","2841359383"]}