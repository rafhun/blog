{"componentChunkName":"component---src-templates-blog-post-js","path":"/block-editor-wordpress-56/","result":{"data":{"site":{"siteMetadata":{"title":"rafhun"}},"markdownRemark":{"id":"cc9d9b04-cab6-5cdf-a571-6ce608ee801f","excerpt":"WordPress v5.6 brings a lot of changes to the editor. Widgets The block based widgets screen is out of experiments and now available by default. To opt out ofâ€¦","html":"<p>WordPress v5.6 brings a lot of changes to the editor.</p>\n<h2>Widgets</h2>\n<p>The block based widgets screen is out of experiments and now available by default. To opt out of this screen remove theme support for it.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token function\">remove_theme_support</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'widgets-block-editor'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Supports</h2>\n<p>Several components have moved on from experimental status. Also color supports now differentiates between background and text colors. The following supports are available from v5.6.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">supports<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  color<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    background<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    gradient<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    text<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  fontSize<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  lineHeight<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Control the preset values using <a href=\"https://developer.wordpress.org/block-editor/developers/themes/theme-support/#block-color-palettes\">editor-color-palette</a>, <a href=\"https://developer.wordpress.org/block-editor/developers/themes/theme-support/#block-gradient-presets\">editor-gradient-presets</a> and <a href=\"https://developer.wordpress.org/block-editor/developers/themes/theme-support/#block-font-sizes\">editor-font-size</a>.</p>\n<h3>Dynamic block support</h3>\n<p>Use the newly available function <code class=\"language-text\">get_block_wrapper_attributes()</code> to automatically populate the necessary attributes in your block container.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">RenderCallback</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$attributes</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$wrapperAtts</span> <span class=\"token operator\">=</span> <span class=\"token function\">get_block_wrapper_attributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token variable\">$markup</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'some block markup'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span>\n    <span class=\"token single-quoted-string string\">'&lt;div %1$s>%2$s&lt;/div>'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$wrapperAtts</span><span class=\"token punctuation\">,</span>\n    <span class=\"token variable\">$markup</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The optional parameter <code class=\"language-text\">$extra_attributes</code> can be used to add more classes and/or inline styles. Important: the parameter must be an array and only the keys <code class=\"language-text\">class</code> and <code class=\"language-text\">style</code> are supported. Any values for these keys will be added to the generated attributes separated by a space.</p>\n<h3>Behind the scenes</h3>\n<p>Adding support for these things automatically adds some attributes to the block, unless you have declared them yourself. You can optionally use these to set default values.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">attributes<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  backgroundColor<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  gradient<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  textColor<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  fontSize<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">'object'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      color<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        background<span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n        gradient<span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n        link<span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n        text<span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      typography<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        fontSize<span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n        lineHeight<span class=\"token operator\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The attributes <code class=\"language-text\">backgroundColor</code>, <code class=\"language-text\">gradient</code>, <code class=\"language-text\">textColor</code> and <code class=\"language-text\">fontSize</code> hold preset values the user has selected. If a custom value is used instead it is stored in the corresponding key within the <code class=\"language-text\">style</code> attribute.</p>\n<h2>Block API version 2</h2>\n<p>This enables blocks to render their own block wrapper element and is an opt-in feature. To use the API version 2 set the following in your block settings.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">registerBlockType</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> apiVersion<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>However to make use of v2 you must also adjust your edit and save functions which now must make use of <code class=\"language-text\">useBlockProps</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useBlockProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@wordpress/block-editor\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Edit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> attributes <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> blockProps <span class=\"token operator\">=</span> <span class=\"token function\">useBlockProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    className<span class=\"token operator\">:</span> someClassName<span class=\"token punctuation\">,</span>\n    style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">blockProps</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>attributes<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useBlockProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@wordpress/block-editor\"</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Save</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> attributes <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> blockProps <span class=\"token operator\">=</span> useBlockProps<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    className<span class=\"token operator\">:</span> someClassName<span class=\"token punctuation\">,</span>\n    style<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">...</span><span class=\"token attr-value\">blockProps</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>attributes<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Make sure to set the plugins <code class=\"language-text\">Requires at least</code> header field to <code class=\"language-text\">5.6</code> if you make use of v2.</p>\n<h2>Toolbar</h2>\n<p>Do not use <code class=\"language-text\">&lt;Toolbar&gt;</code> within another toolbar to group related controls. Use <code class=\"language-text\">&lt;ToolbarGroup&gt;</code> instead. If you see a deprecation warning about a nested toolbar, change it to a toolbar group.</p>\n<p>Also for accessibility reasons do not use elements such as <code class=\"language-text\">&lt;button /&gt;</code> or <code class=\"language-text\">&lt;Dropdown&gt;</code> menu as direct descendent of a toolbar. Use <code class=\"language-text\">ToolbarButton</code> for regular buttons or <code class=\"language-text\">ToolbarItem</code> for any other kind of control (i. e. dropdowns).</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BlockControls</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ToolbarItem</span></span> <span class=\"token attr-name\">as</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ToolbarButton</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ToolbarItem</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">itemProps</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DropdownMenu</span></span> <span class=\"token attr-name\">toggleProps</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>itemProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ToolbarItem</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BlockControls</span></span><span class=\"token punctuation\">></span></span></code></pre></div>","frontmatter":{"title":"Block editor and WordPress 5.6","date":"December 03, 2020","description":null}},"previous":{"fields":{"slug":"/wordpress-customizer-logo/"},"frontmatter":{"title":"Working with the WordPress customizer logo"}},"next":null},"pageContext":{"id":"cc9d9b04-cab6-5cdf-a571-6ce608ee801f","previousPostId":"bde32c91-e7b0-5af9-9e0a-b790ef2483a0","nextPostId":null}},"staticQueryHashes":["1633425274","2841359383"]}